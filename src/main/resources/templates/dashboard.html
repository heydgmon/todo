<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Todo Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/layout.css}">

    <style>
        .content {
            max-width: 1400px;
            margin: 0 auto;

            /* 🔥 화면 전체 높이 채우기 */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .card {
            border-radius: 14px;
        }
    </style>
</head>

<body>

<div class="layout">

    <!-- ✅ 사이드바 -->
    <aside class="sidebar">
        <div class="logo">일정 관리 앱</div>
        <ul class="menu">
            <li><a th:href="@{/dashboard}">📊 대시보드</a></li>
            <li><a th:href="@{/calendar}">📅 캘린더</a></li>
            <li><a th:href="@{/todo}">📝 할 일 관리</a></li>
            <li><a th:href="@{/settings}">⚙ 설정</a></li>
            <li><a th:href="@{/logout}">🚪 로그아웃</a></li>
        </ul>
    </aside>

    <!-- ✅ 메인 -->
    <div class="content">
        <div class="container-fluid d-flex flex-column flex-grow-1">

            <!-- 🔥 상단 통계 카드 -->
            <div class="row mb-4 g-4">

                <div class="col-md-3">
                    <div class="card shadow-sm p-4 text-center h-100">
                        <h6>📌 오늘 할 일</h6>
                        <h2 class="fw-bold text-primary"
                            th:text="${#lists.size(todayTasks)}">0</h2>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm p-4 text-center h-100">
                        <h6>📅 이번 주 일정</h6>
                        <h2 class="fw-bold text-success"
                            th:text="${#lists.size(weekTasks)}">0</h2>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm p-4 text-center h-100">
                        <h6>⏳ 지연 일정</h6>
                        <h2 class="fw-bold text-danger"
                            th:text="${#lists.size(overdueTasks)}">0</h2>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm p-4 h-100">
                        <h6>🔥 가장 임박한 일정</h6>
                        <ul class="mb-0 small mt-2">
                            <li th:each="task : ${urgentTasks}">
                                <span th:text="${task.title}"></span>
                                (<span th:text="${task.deadline}"></span>)
                            </li>
                        </ul>
                    </div>
                </div>

            </div>

            <!-- 🔥 하단 영역 -->
            <div class="row g-4 mt-2">

                <!-- 좌측 큰 카드 -->
                <div class="col-lg-8">
                    <div class="card shadow-sm p-5 h-100">

                        <div class="row">

                            <!-- 오늘 -->
                            <div class="col-md-6">
                                <h5>📌 오늘 해야 할 작업</h5>
                                <hr>
                                <ul class="list-group list-group-flush mt-3">
                                    <li class="list-group-item"
                                        th:each="task : ${todayTasks}"
                                        th:text="${task.title}">
                                    </li>
                                    <li class="list-group-item text-muted"
                                        th:if="${#lists.isEmpty(todayTasks)}">
                                        오늘 일정이 없습니다
                                    </li>
                                </ul>
                            </div>

                            <!-- 지연 -->
                            <div class="col-md-6">
                                <h5 class="text-danger">⏳ 지연된 작업</h5>
                                <hr class="text-danger">
                                <ul class="list-group list-group-flush mt-3">
                                    <li class="list-group-item text-danger"
                                        th:each="task : ${overdueTasks}">
                                        <span th:text="${task.title}"></span>
                                        (<span th:text="${task.deadline}"></span>)
                                    </li>
                                    <li class="list-group-item text-muted"
                                        th:if="${#lists.isEmpty(overdueTasks)}">
                                        지연된 일정이 없습니다 🎉
                                    </li>
                                </ul>
                            </div>

                        </div>

                    </div>
                </div>

                <!-- 우측 Tip -->
                <div class="col-lg-4">
                    <div class="card shadow-sm p-5 h-100">
                        <h5>💡 Tip</h5>
                        <hr>
                        <p class="text-muted mt-3">
                            지연 일정은 빨간색으로 표시됩니다.
                        </p>
                        <p class="text-muted">
                            오늘 할 일을 먼저 처리하세요 🔥
                        </p>
                        <p class="text-muted">
                            일정은 캘린더에서 관리하세요.
                        </p>
                    </div>
                </div>

            </div>

        </div>
    </div>

</div>

</body>
</html>
